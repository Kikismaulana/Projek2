create sequence id_jurusan;
create sequence id_kelas;
create sequence id_users;
create sequence id_presensi;
create sequence id_izin;

create table jurusan (
id_jurusan int not null PRIMARY KEY DEFAULT NEXTVAL('id_jurusan'),
nama_jurusan varchar (50));


create table kelas (
id_kelas int not null PRIMARY KEY DEFAULT NEXTVAL('id_kelas'),
id_jurusan int not null REFERENCES jurusan (id_jurusan) ON DELETE CASCADE ON UPDATE CASCADE,
nama_kelas varchar (20));


create table siswa (
NIS int not null PRIMARY KEY,
id_kelas int not null REFERENCES kelas (id_kelas) ON DELETE CASCADE ON UPDATE CASCADE,
nama_lengkap varchar (50),
jk varchar (9),
ttl varchar (50),
email varchar (50),
agama varchar (10),
alamat text,
no_hp varchar (15),
nama_ayah varchar (50),
nama_ibu varchar (50),
pekerjaan_ayah varchar (50),
pekerjaan_ibu varchar (50),
alamat_ortu text);

create table guru (
NIP int not null,
id_kelas int not null REFERENCES kelas (id_kelas) ON DELETE CASCADE ON UPDATE CASCADE,
nama_lengkap varchar (50),
email varchar (50),
password varchar (50),
jk varchar (9),
no_hp varchar (15),
alamat text,
PRIMARY KEY (NIP)
);

create table users (
id_users int not null PRIMARY KEY,
NIS int not null REFERENCES siswa (NIS) ON DELETE CASCADE ON UPDATE CASCADE,
NIP int not null REFERENCES guru (NIP) ON DELETE CASCADE ON UPDATE CASCADE,
NISN int not null,
password varchar (50),
level varchar (10)
);

create table izin (
id_izin int not null PRIMARY KEY DEFAULT NEXTVAL ('id_izin'),
alasan text,
tanggal_mulai date,
tanggal_selesai date,
bukti varchar(50),
status varchar (10)
);

create table presensi (
id_presensi int not null PRIMARY KEY DEFAULT NEXTVAL('id_presensi'),
NIS int not null REFERENCES siswa (NIS) ON DELETE CASCADE ON UPDATE CASCADE,
id_izin int not null REFERENCES izin (id_izin) ON DELETE CASCADE ON UPDATE CASCADE,
tanggal date,
presensi varchar (20),
pulang time,
lebih_cepat int,
masuk time,
terlambat int
);

https://www.tutorialspoint.com/postgresql/postgresql_php.htm